from sklearn.cross_validation import cross_val_score, ShuffleSplit
from sklearn.datasets import load_boston
from sklearn.ensemble import RandomForestRegressor
import numpy as np
import pandas as pd

Y = pd.read_csv("Target.csv")
X = pd.read_csv("XsAll.csv")
names=X.columns


# Load boston housing dataset as an example
# boston = load_boston()
# X = boston["data"]
# Y = boston["target"]
# names = boston["feature_names"]

rf = RandomForestRegressor(n_estimators=20, max_depth=4)
scores = []
# 单独采用每个特征进行建模，并进行交叉验证
for i in range(X.shape[1]):
    score = cross_val_score(rf, X.iloc[:, i:i+1], Y, scoring="r2",  # 注意X[:, i]和X[:, i:i+1]的区别
                            cv=ShuffleSplit(len(X), 3, .3))
    scores.append((format(np.mean(score), '.3f'), names[i]))
print(sorted(scores, reverse=True))

# result:
#     [('0.121', 'V19'), ('0.115', 'V50'), ('0.112', 'V85'), ('0.112', 'V31'), ('0.106', 'V25'), ('0.102', 'V98'), ('0.097', 'V13'), ('0.096', 'V76'), ('0.092', 'V106'), ('0.090', 'V4'), ('0.090', 'V37'), ('0.090', 'V16'), ('0.089', 'V10'), ('0.087', 'V7'), ('0.085', 'V128'), ('0.084', 'V92'), ('0.084', 'V56'), ('0.084', 'V112'), ('0.084', 'V103'), ('0.083', 'V79'), ('0.082', 'V34'), ('0.082', 'V109'), ('0.080', 'V64'), ('0.080', 'V101'), ('0.078', 'V125'), ('0.077', 'V40'), ('0.076', 'V100'), ('0.075', 'V82'), ('0.073', 'V28'), ('0.066', 'V58'), ('0.065', 'V61'), ('0.064', 'V94'), ('0.064', 'V74'), ('0.063', 'V46'), ('0.063', 'V122'), ('0.061', 'V88'), ('0.060', 'V71'), ('0.058', 'V115'), ('0.057', 'V53'), ('0.055', 'V43'), ('0.054', 'V95'), ('0.054', 'V91'), ('0.054', 'V47'), ('0.053', 'V52'), ('0.053', 'V49'), ('0.053', 'V22'), ('0.052', 'V97'), ('0.052', 'V73'), ('0.052', 'V68'), ('0.051', 'V45'), ('0.050', 'V62'), ('0.048', 'V55'), ('0.047', 'V41'), ('0.047', 'V124'), ('0.046', 'V99'), ('0.046', 'V90'), ('0.045', 'V93'), ('0.044', 'V44'), ('0.043', 'V89'), ('0.041', 'V127'), ('0.040', 'V70'), ('0.039', 'V69'), ('0.038', 'V126'), ('0.038', 'V120'), ('0.037', 'V87'), ('0.037', 'V66'), ('0.037', 'V39'), ('0.036', 'V121'), ('0.035', 'V96'), ('0.035', 'V123'), ('0.034', 'V72'), ('0.034', 'V67'), ('0.033', 'V42'), ('0.031', 'V118'), ('0.029', 'V51'), ('0.028', 'V119'), ('0.026', 'V65'), ('0.025', 'V48'), ('0.025', 'V23'), ('0.024', 'V5'), ('0.023', 'V116'), ('0.021', 'V38'), ('0.020', 'V59'), ('0.019', 'V83'), ('0.019', 'V8'), ('0.019', 'V77'), ('0.019', 'V29'), ('0.017', 'V26'), ('0.017', 'V110'), ('0.016', 'V17'), ('0.014', 'V86'), ('0.013', 'V57'), ('0.013', 'V35'), ('0.013', 'V107'), ('0.012', 'V32'), ('0.012', 'V104'), ('0.011', 'V80'), ('0.010', 'V63'), ('0.010', 'V33'), ('0.008', 'V60'), ('0.008', 'V20'), ('0.008', 'V113'), ('0.007', 'V36'), ('0.004', 'V54'), ('0.004', 'V14'), ('0.004', 'V117'), ('0.004', 'V111'), ('0.004', 'V11'), ('0.003', 'V114'), ('0.002', 'V9'), ('0.002', 'V81'), ('0.002', 'V6'), ('0.002', 'V3'), ('0.002', 'V105'), ('0.001', 'V78'), ('0.001', 'V27'), ('0.001', 'V24'), ('0.001', 'V18'), ('0.000', 'V84'), ('0.000', 'V12'), ('-0.003', 'V102'), ('-0.002', 'V15'), ('-0.001', 'V75'), ('-0.001', 'V30'), ('-0.001', 'V21'), ('-0.001', 'V108')]
